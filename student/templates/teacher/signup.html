{% extends "pre_login_template.html" %}


{% block content %}

<div class="relative py-3 sm:max-w-xl mx-auto text-center">
    <span class="text-2xl font-bold dark:text-white">Login to your account</span>
    <div class="relative mt-4 bg-white shadow-lg sm:rounded-lg text-left dark:bg-gray-200 rounded-t-md ">
        <div class="h-3 bg-purple-700 dark:bg-purple-400 rounded-t-md"></div>

        <form method="post" onsubmit="return signupvalidateForm()" name="signup">
            {% csrf_token %}

            <div class="py-6 px-8">

                <div class="flex flex-wrap -mx-3 mb-6">
                    <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                        <label class="block font-semibold " for="grid-first-name">
                            First Name <sup class="text-xs font-bold text-red-600">*</sup>
                        </label>
                        <input
                            class="border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:bg-white focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 dark:focus:ring-purple-400 rounded-md"
                            id="grid-first-name" type="text" name="fname" placeholder="Jane">
                    </div>
                    <div class="w-full md:w-1/2 px-3">
                        <label class="block font-semibold " for="grid-last-name">
                            Last Name
                        </label>
                        <input
                            class="border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:bg-white focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 dark:focus:ring-purple-400 rounded-md"
                            id="grid-last-name" type="text" name="lname" placeholder="Doe">
                    </div>
                </div>


                <label class="block mt-3 font-semibold ">Email <sup class="text-xs font-bold text-red-600">*</sup><label>
                        <input type="email" placeholder="Email" name="email"
                            class="border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:bg-white focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 dark:focus:ring-purple-400 rounded-md">

                            <div class="flex flex-wrap -mx-3 mb-6 mt-5">
                                <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                                    <label class="block font-semibold " for="grid-first-name">
                                        Gender <sup class="text-xs font-bold text-red-600">*</sup>
                                    </label>
                                    <input value="male" class="p-1 m-1 mt-4" name="gender" type="radio" placeholder="Male"> Male
                                    <input value="female" class="p-1 m-1 mt-4" name="gender" type="radio" placeholder="Male"> Female
                                </div> 
                                <div class="w-full md:w-1/2 px-3">
                                    <label class="block font-semibold " for="grid-last-name">
                                        Country <sup class="text-xs font-bold text-red-600">*</sup>
                                    </label>
                                    <!-- <input
                                        class="border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:bg-white focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 dark:focus:ring-purple-400 rounded-md"
                                        id="grid-last-name" type="text" placeholder="Doe"> -->
                                        <!-- Select for all countries -->
                                        <select class="w-full block appearance-none border border-gray-200 py-2 mt-1 px-3 pr-4 hover:outline-none focus:bg-white focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 dark:focus:ring-purple-400 rounded-md" id="grid-last-name" name="country"><sup class="text-xs font-bold text-red-600">*</sup>
                                            <option value="">Select Country</option>
                                            <option value="Afghanistan">Afghanistan</option>
                                            <option value="Albania">Albania</option>
                                            <option value="Algeria">Algeria</option>
                                            <option value="American Samoa">American Samoa</option>
                                            <option value="Andorra">Andorra</option>
                                            <option value="Angola">Angola</option>
                                            <option value="Anguilla">Anguilla</option>
                                            <option value="Antarctica">Antarctica</option>
                                            <option value="Antigua and Barbuda">Antigua and Barbuda</option>
                                            <option value="Argentina">Argentina</option>
                                            <option value="Armenia">Armenia</option>
                                            <option value="Aruba">Aruba</option>
                                            <option value="Australia">Australia</option>
                                            <option value="Austria">Austria</option>
                                            <option value="Azerbaijan">Azerbaijan</option>
                                            <option value="Bahamas">Bahamas</option>
                                            <option value="Bahrain">Bahrain</option>
                                            <option value="Bangladesh">Bangladesh</option>
                                            <option value="Barbados">Barbados</option>
                                            <option value="Belarus">Belarus</option>
                                            <option value="Belgium">Belgium</option>
                                            <option value="Belize">Belize</option>
                                            <option value="Benin">Benin</option>
                                            <option value="Bermuda">Bermuda</option>
                                            <!-- all countries -->
                                            <option value="Bhutan">Bhutan</option>
                                            <option value="Bolivia">Bolivia</option>
                                            <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
                                            <option value="Botswana">Botswana</option>
                                            <option value="Bouvet Island">Bouvet Island</option>
                                            <option value="Brazil">Brazil</option>
                                            <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
                                            <option value="Brunei Darussalam">Brunei Darussalam</option>

                                        </select>
                                </div>
                            </div>

                        <label class="block font-semibold mt-3">Password <sup class="text-xs font-bold text-red-600">*</sup><label>
                                <input type="password" placeholder="Password" name="password"
                                    class=" border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 rounded-md dark:focus:ring-purple-400">


                                <label class="block mt-3 font-semibold">Retype Password <sup class="text-xs font-bold text-red-600">*</sup><label>
                                        <input type="password" placeholder="Retype Password" name="retype_password"
                                            class=" border w-full h-5 px-3 py-5 mt-2 hover:outline-none focus:outline-none focus:ring-2 ring-red-500 focus:ring-purple-600 rounded-md dark:focus:ring-purple-400">

                                            

                                        <button type="submit"
                                            class="mt-4 bg-purple-700 text-white py-1.5 px-3 font-semibold rounded-lg hover:bg-purple-900">Register
                                        </button>

                                        <p id="form-error"class="text-red-500 text-sm italic m-1 mt-2 bg-red-50 rounded-md"></p>

                                        <hr class="my-4 border-2 border-purple-800">

                                        <span class="text-sm">Already have an account ? <a href="/teacher/auth/login"
                                                class="text-purple-700 hover:bg-purple-100 hover:underline">Login</a></span>
            </div>
        </form>
    </div>
</div>

<script>
    function signupvalidateForm()
    {
      var email = document.forms["signup"]["email"];
      var password = document.forms["signup"]["password"];
      var retype_password = document.forms["signup"]["retype_password"];
      var fname = document.forms["signup"]["fname"];
      var lname = document.forms["signup"]["lname"];
      var gender = document.forms["signup"]["gender"];
      var country = document.forms["signup"]["country"];
      var error = document.getElementById("form-error");
      var regularExpression  = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/;
      console.log(email.value, password.value, country.value, fname.value, gender.value, lname.value)
      if(lname.value == ""){
        lname.value = " "
      }

      if (email.value == "" || password.value == "" || retype_password.value == "" || fname.value == "" || gender.value == "" || country.value == "") 
       {
        if (!(error.classList.contains("p-1.5"))){
            error.classList.add("p-1.5")
        }

          if (password.value == "")
          {
              password.classList.add("ring-2");
          }
          else{
            password.classList.remove("ring-2");
          }

          if (email.value == ""){
              email.classList.add("ring-2");
          }
          else{
            email.classList.remove("ring-2");
          }

          if (retype_password.value == ""){
              retype_password.classList.add("ring-2");
          }
          else{
            retype_password.classList.remove("ring-2");
          }

          if (fname.value == ""){
              fname.classList.add("ring-2");
          }
          else{
            fname.classList.remove("ring-2");
          }

          if (country.value == ""){
            country.classList.add("ring-2");
          }
          else{
            country.classList.remove("ring-2");
          }

          error.innerHTML = "Please Fill all * Feilds";
          return false;
      }
      else if (regularExpression.test(password.value) == false || password.value.length <6 ) 
      {
        if (!(error.classList.contains("p-1.5"))){
            error.classList.add("p-1.5")
        }

        password.classList.add("ring-2");
        retype_password.classList.add("ring-2");
        error.innerHTML = "Password not Strong <br> Guidelines = passowrd should be 6 characters long should have [lowercase alphabet, a number,  special character]"
        return false;
      }
      else if (password.value != retype_password.value)
      {
        if (!(error.classList.contains("p-1.5"))){
            error.classList.add("p-1.5")
        }
        
        error.innerHTML = "Passwords do not match"
        return false;
      }
      else{
        return true;
      }
    }
</script>
{% endblock %}